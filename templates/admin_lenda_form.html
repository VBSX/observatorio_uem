{% extends 'layout.html' %}

{% block content %}
<div class="admin-container">
    <h1>{{ title }}</h1>
    
    <form method="post" enctype="multipart/form-data" novalidate>
        {{ form.csrf_token }}
        
        <div class="form-group">
            {{ form.titulo.label }}
            {{ form.titulo(class="form-control", required=True) }}
            {% for error in form.titulo.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="form-group">
            {{ form.local.label }}
            {{ form.local(class="form-control", required=True) }}
            {% for error in form.local.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            {{ form.descricao.label }}
            {{ form.descricao(class="form-control", rows=12, required=True) }}
            {% for error in form.descricao.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            {{ form.imagem.label }}
            {% if form.data and form.data.imagem_url %}
            <div class="current-image">
                <p>Imagem atual:</p>
                <img src="{{ form.data.imagem_url }}" class="admin-thumbnail" alt="Imagem atual">
            </div>
            <p><strong>Para substituir, envie uma nova imagem abaixo:</strong></p>
            {% endif %}
            {{ form.imagem(class="form-control-file", accept="image/png, image/jpeg, image/gif") }}
            {% for error in form.imagem.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="form-group">
            {{ form.submit(class="btn-submit") }}
            <a href="{{ url_for('admin_lendas') }}" class="btn-cancel">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}